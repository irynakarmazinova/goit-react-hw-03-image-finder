{"version":3,"sources":["components/Searchbar/Searchbar.jsx","services/pixabay-api.jsx","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js"],"names":["Searchbar","state","searchImageName","handleImageChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","submit","toast","error","this","className","onSubmit","type","autoComplete","autoFocus","placeholder","onChange","Component","fetchImages","page","fetch","then","response","ok","json","ImageGalleryItem","image","webformatURL","tags","onModalOpen","onClick","src","alt","Button","onBtnClick","LoaderSpinner","role","color","height","width","timeout","Modal","handleKeyDown","keyCode","onModalClose","handleBackdropClick","target","window","addEventListener","removeEventListener","activeImg","largeImageURL","Status","ImageGallery","images","status","showModal","lastPage","loadImages","hits","total","Error","catch","toggleModal","prevProps","prevState","setTimeout","scrollTo","top","document","documentElement","scrollHeight","behavior","Loader","message","map","id","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.52079d31.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    searchImageName: '',\n  };\n\n  handleImageChange = e => {\n    this.setState({ searchImageName: e.currentTarget.value.toLowerCase() });\n  };\n\n  // при сабмите формы\n  handleSubmit = e => {\n    const { searchImageName } = this.state;\n\n    e.preventDefault();\n\n    // trim - слева и справа обрезает пробелы у строк\n    if (searchImageName.trim() === '') {\n      //  return toast.error('What picture do you need?');\n      toast.error('What picture do you need?');\n      return;\n    }\n\n    this.props.submit(this.state.searchImageName);\n    this.setState({ searchImageName: '' });\n  };\n\n  render() {\n    const { searchImageName } = this.state;\n\n    return (\n      <header className=\"Searchbar\">\n        {/* onSubmit - регистрация на событии сабмита на встроенном компоненте form */}\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={searchImageName}\n            onChange={this.handleImageChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  submit: PropTypes.func.isRequired,\n};\n","function fetchImages(searchImageName, page) {\n  const API_KEY = '22935349-f238c1b9d1a1a29229f76f105';\n\n  return fetch(\n    `https://pixabay.com/api/?q=${searchImageName}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return response;\n  });\n}\n\nexport default fetchImages;\n","import PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({\n  image: { webformatURL, tags },\n  image,\n  onModalOpen,\n}) => (\n  <li className=\"ImageGalleryItem\" onClick={() => onModalOpen(image)}>\n    <img src={webformatURL} alt={tags} className=\"ImageGalleryItem-image\" />\n  </li>\n);\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.shape({\n    webformatURL: PropTypes.string,\n    tags: PropTypes.string,\n  }).isRequired,\n  onModalOpen: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\nconst Button = ({ onBtnClick }) => (\n  <button type=\"button\" className=\"Button\" onClick={onBtnClick}>\n    Load more...\n  </button>\n);\nexport default Button;\n\nButton.propTypes = {\n  onBtnClick: PropTypes.func.isRequired,\n};\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst LoaderSpinner = () => (\n  <div role=\"alert\" className=\"loader\">\n    <Loader\n      type=\"MutatingDots\"\n      color=\"#3f51b5\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  </div>\n);\nexport default LoaderSpinner;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Modal extends Component {\n  handleKeyDown = e => {\n    if (e.keyCode === 27) {\n      this.props.onModalClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onModalClose();\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  render() {\n    const {\n      activeImg: { largeImageURL, tags },\n    } = this.props;\n\n    return (\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt={tags} />\n        </div>\n      </div>\n    );\n  }\n}\nexport default Modal;\n\nModal.propTypes = {\n  onModalClose: PropTypes.func.isRequired,\n  activeImg: PropTypes.shape({\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n  }).isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchImages from 'services/pixabay-api';\n\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport Loader from '../Loader/Loader';\nimport Modal from '../Modal/Modal';\n\nconst Status = {\n  IDLE: 'idle', //  простой, стоит и ничего не делает\n  PENDING: 'pending', // ожидается выполнение\n  RESOLVED: 'resolved', // выполнилось с результатом хорошо\n  REJECTED: 'rejected', // отклонено\n};\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    status: Status.IDLE,\n    showModal: false,\n\n    activeImg: null,\n    lastPage: 1,\n  };\n\n  // когда компонент обновляется\n  componentDidUpdate(prevProps, prevState) {\n    const { searchImageName } = this.props;\n\n    // всегда нужно делать проверку, потому что может зациклить компонент!\n    // предыдущий пропс имг и следующий(текущий) пропс имг\n    // старый рендет-новый рендер\n    if (prevProps.searchImageName !== searchImageName) {\n      this.setState({ images: [] }, () => {\n        this.loadImages(1);\n      });\n    }\n\n    if (prevState.images !== this.state.images) {\n      setTimeout(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      }, 0);\n    }\n  }\n\n  loadImages = page => {\n    const { images } = this.state;\n    const { searchImageName } = this.props;\n\n    this.setState({ status: Status.PENDING, lastPage: page });\n\n    fetchImages(searchImageName, page)\n      .then(({ hits, total }) => {\n        if (!total) {\n          const error = new Error(\n            `There is no picture with ${searchImageName} name, please enter another request`,\n          );\n          this.setState({ error, status: Status.REJECTED });\n        } else {\n          this.setState({\n            images: [...(images || []), ...hits],\n            status: Status.RESOLVED,\n          });\n        }\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  onModalOpen = activeImg => {\n    this.setState({ activeImg });\n    this.toggleModal();\n  };\n\n  onBtnClick = () => {\n    const { lastPage } = this.state;\n\n    this.loadImages(lastPage + 1);\n  };\n\n  render() {\n    const { images, error, status, showModal, activeImg } = this.state;\n    const { toggleModal, onBtnClick, onModalOpen } = this;\n\n    if (status === Status.IDLE) {\n      return <div className=\"errorMessage\">Please enter your request</div>;\n    }\n\n    if (status === Status.PENDING) {\n      return <Loader />;\n    }\n\n    if (status === Status.REJECTED) {\n      return <h1>{error.message}</h1>;\n    }\n\n    if (status === Status.RESOLVED) {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {images.map(image => (\n              <ImageGalleryItem\n                key={`image-item-image-${image.id}`}\n                onModalOpen={onModalOpen}\n                // webformatURL={image.webformatURL}\n                // tags={image.tags}\n                // largeImageURL={image.largeImageURL}\n                // {...image}\n                image={image}\n              />\n            ))}\n          </ul>\n\n          <Button onBtnClick={onBtnClick} />\n\n          {showModal && (\n            <Modal onModalClose={toggleModal} activeImg={activeImg} />\n          )}\n        </>\n      );\n    }\n  }\n}\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  searchImageName: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport ImageGallery from 'components/ImageGallery/ImageGallery';\n\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    searchImageName: '',\n  };\n\n  handleFormSubmit = searchImageName => {\n    this.setState({ searchImageName });\n  };\n\n  render() {\n    const { searchImageName } = this.state;\n    const { handleFormSubmit } = this;\n\n    return (\n      <div className=\"App\">\n        <ToastContainer />\n\n        {/* в Searchbar передаю проп submit(имя пропса), куда я передаю ссылку на метод handleFormSubmit */}\n        <Searchbar submit={handleFormSubmit} />\n\n        <ImageGallery searchImageName={searchImageName} />\n      </div>\n    );\n  }\n}\n\n//PureComponent и shouldComponentUpdate\n\nexport default App;\n\n// --------------------\n// API - bk\n\n// const fn = a => {\n//   return console.log(a);\n// };\n// fn('2');\n// fn('a');\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}